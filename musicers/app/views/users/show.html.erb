<div class="container">
  <h1 class="mt-3"><i class="fas fa-user">Mypage</i></h1>
  <div class="row">
    <div class="col-md-4 mx-md-auto col-8 offset-2">
      <div class="mt-3">
        <img>
        <%= attachment_image_tag @user, :profile_image, :fill, 300, 300, fallback: "no_image.jpg",size: "300x300",class: "my-3 rounded-circle" %>
        </img>
        <div><i><strong><%= @user.name %></strong></i></div>
      </div>
      <div class="mt-3">
        <strong><%= @user.introduction %></strong>
      </div>

      <div class="my-4">
        <%= link_to user_followings_path(@user),class: "text-dark" do %><i class="fas fa-user-check fa-lg mr-3">Follow:&ensp;<%= @user.followings.count %><% end %></i>
        <%= link_to user_followers_path(@user),class: "text-dark" do %><i class="fas fa-user-friends fa-lg ">Follower:&ensp;<%= @user.followers.count %><% end %></i>
      </div>
      <div class="mt-3">
        <button class="btn btn-outline-info btn-block">
          <% if current_user.following?(@user) %>
            <%= link_to user_relationships_path(@user), method: :delete ,class: "text-info" do %><i class="fas fa-user-slash">&nbsp;Unfollow</i><% end %>
          <% else %>
            <%= link_to user_relationships_path(@user), method: :post,class: "text-info"   do %><i class="fas fa-user-check">&nbsp;Follow</i><% end %>
          <% end %>
        </button>
      </div>
      <div class="text-right mt-3">
        <% if @user == current_user  %>
        <button class="btn">
          <%= link_to edit_user_path(current_user),class: "text-info" do%><i class="fas fa-user-edit">Edit</i><% end %>
        </button>
        <% end %>
      </div>
    </div>
  </div>
  <div class="row mt-5">
    <% @musics.each do |music| %>
    <div class="col-sm-5 my-4 offset-sm-1 mb-3 col-8 offset-2">
      <div class="card mt-4 shadow-lg h-100">
        <%= link_to music_path(music) do %>
        <%= attachment_image_tag music, :musicimage,class: "card-img-top"%>
        <% end %>
      <div class="card-body">
          <p class="card-title"><strong><%= music.music_name %></strong></p>
          <p class="card-textã€€text-wrap"><%= music.music_caption %></p>
          <p class="card-text"><%= music.music_url %></p>
          <div class="card-text" >
            <%= link_to user_path(music.user),class: "text-dark" do %>
            <div>
              <%= attachment_image_tag music.user,:profile_image ,size:"50x50", fallback: "no_image.jpg",class:"mt-3 rounded-circle" %>
            </div>
            <div class=" mt-1"><%= music.user.name%></div>
            <% end %>
          </div>
          <div class="my-3">
            <button type="button" class="btn btn-outline-info"><%= link_to music_path(music), class: "text-info" do %><i class="fas fa-eye ">&nbsp;Detail</i><% end %></button>
          </div>
          <div class="d-inline" id="music_favorite_<%= music.id %>">
            <%= render 'favorites/favorite', music: music %>
          </div>
          <div class="d-inline ml-2">
            <i class="fas fa-comments text-info fa-lg"><%= music.music_comments.count %></i>
          </div>
          <div class="text-right mt-3"><%= music.created_at.strftime('%Y/%m/%d') %></div>
      </div>
      </div>
    </div>
    <% end %>
  </div>
  <div class="row mt-5">
     <div class="col-2">
       <button class="btn btn-primary">
         <%= link_to :back ,class: "text-light" do%><i class="fas fa-backward">&nbsp;Back</i><% end %>
       </button>
     </div>
     <div class="offset-3 col-5">
       <%= paginate @musics  %>
     </div>
  </div>
</div>







